(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{352:function(t,s,a){"use strict";a.r(s);var n=a(42),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"事务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事务"}},[t._v("#")]),t._v(" 事务")]),t._v(" "),a("h2",{attrs:{id:"什么是事务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是事务"}},[t._v("#")]),t._v(" 什么是事务")]),t._v(" "),a("p",[t._v("​\t\t事务只是一个改变，是一些"),a("strong",[t._v("操作的集合")]),t._v("。用专业的术语讲，它就是一个程序的执行单元。"),a("strong",[t._v("事务的本身其实并不包含ACID这4个特性")]),t._v(",我们需要通过某些手段，尽可能的让这个执行单元去满足这4个特性，那么，我们就可以称他为一个事务，或者说是一个正确的事务，完美的事务。")]),t._v(" "),a("h2",{attrs:{id:"事务的四大特性（acid）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事务的四大特性（acid）"}},[t._v("#")]),t._v(" 事务的四大特性（ACID）")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("原子性")]),t._v("（Atomicity）")]),t._v(" "),a("p",[t._v("原子性是指事务里包含的所有操作，要么全部成功，要么就全部失败回滚。因此事务的操作如果成功就必须完全应用到数据库中，如果操作失败，就不能对数据库有任何影响。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("一致性")]),t._v(" （Consistency）")]),t._v(" "),a("p",[t._v("一致性指的就是一个事务执行之前和之后都必须处于一致的状态。")]),t._v(" "),a("p",[t._v("就拿转账来说，用户A和用户B的钱想加起来是5000，那么不管A和B怎么转账，或者转几次，事务结束之后两个用户的钱相加起来还得是5000，这就是事务的一致性。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("隔离性")]),t._v(" （lsolation）")]),t._v(" "),a("p",[t._v("隔离性指的是多个并发事务之间是相互隔离，比如多个事务操作同一张表，每一个事务都不能被其他的操作所干扰。MySQL这块还有"),a("a",{attrs:{href:"#%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"}},[t._v("4种事务的隔离级别")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("持久性")]),t._v(" （Durability）")]),t._v(" "),a("p",[t._v("持久性是指当事务一旦被提交了，那么对数据库的改变是永久性的。")])])]),t._v(" "),a("h2",{attrs:{id:"事务的隔离级别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事务的隔离级别"}},[t._v("#")]),t._v(" 事务的隔离级别")]),t._v(" "),a("blockquote",[a("p",[t._v("为了权衡隔离和并发的矛盾，ISO定义4个事务的隔离级别，每个隔离级别的隔离程度各不同，允许出现的副作用也不同。")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("隔离级别")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("脏读")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("不可重复读")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("幻读")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("读未提交（Read-uncommitted）")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("可能")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("可能")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("可能")])]),t._v(" "),a("tr",[a("td",[t._v("读已提交（Read-committed）")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("不能")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("可能")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("可能")])]),t._v(" "),a("tr",[a("td",[t._v("可重复读（Repeatable Read）")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("不能")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("不能")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("可能")])]),t._v(" "),a("tr",[a("td",[t._v("可串行化（Seralizable）")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("不能")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("不能")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("不能")])])])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("读未提交（read-uncommitted）")]),t._v(" "),a("p",[t._v("最低的一个级别，事务A可以读取到事务B"),a("strong",[t._v("修改但未提交")]),t._v("的数据。")]),t._v(" "),a("p",[t._v("一般很少用这种隔离级别，除非是浏览量文章阅读量每次+1这种场景。")])]),t._v(" "),a("li",[a("p",[t._v("读已提交（read committed）")]),t._v(" "),a("p",[t._v("事务A只能读取到事务B"),a("strong",[t._v("修改并已提交")]),t._v("的数据。")]),t._v(" "),a("p",[a("strong",[t._v("如果希望在同一个事务中，数据不管读取多少次，结果都是一样的，这种隔离级别就无法满足。")])])]),t._v(" "),a("li",[a("p",[t._v("可重复读（repeatable read）（默认的隔离级别）")]),t._v(" "),a("p",[t._v("在同一个事务中，多次读取数据时，不管其他的事务有没有修改过数据（不论是否提交）始终是一样的值。")])]),t._v(" "),a("li",[a("p",[t._v("serializable 串行化")])])]),t._v(" "),a("p",[t._v("一个事务在修改数据的时候，如果其他的事务也想改，就必须等前边的事务提交或者回滚以后才能继续。")]),t._v(" "),a("p",[t._v("最严格的级别，性能最低，也很少用。")]),t._v(" "),a("h3",{attrs:{id:"并发情况下不同隔离级别引发的几个问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#并发情况下不同隔离级别引发的几个问题"}},[t._v("#")]),t._v(" 并发情况下不同隔离级别引发的几个问题")]),t._v(" "),a("details",{staticClass:"custom-block details"},[a("summary",[t._v("如要自己动手测试，可点击此处查看创建数据表语句")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#创建数据表")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("UNSIGNED")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("auto_increment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VARCHAR")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("money"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DECIMAL")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("NULL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("PRIMARY")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("UNIQUE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("KEY")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("USING")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BTREE")]),t._v(" \n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENGINE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INNODB")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DEFAULT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CHARSET")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" utf8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#插入测试数据")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INSERT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INTO")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v("money"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("`")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VALUES")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'A'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'B'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("脏读：A事务还没有commit B事务就读到了A事务的数据（破坏了隔离性）")]),t._v(" "),a("p",[t._v("​")]),t._v(" "),a("p",[t._v("逻辑图如下：")]),t._v(" "),a("p",[a("img",{attrs:{src:"/images/%E8%84%8F%E8%AF%BB%E9%80%BB%E8%BE%91%E5%9B%BE.png",alt:"脏读逻辑图"}})]),t._v(" "),a("p",[t._v("动手试一下：")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#例：A用户是买家B是卖家，A要付100元给B的场景")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#第一步 先打开两个终端，同时登陆到MySQL上去，第一个终端模拟A用户，第二个终端模拟B用户，此时的两个用户的数据如下：")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("----+------+---------+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" money   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("----+------+---------+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" A    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000.00")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" B    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000.00")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("----+------+---------+")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#第二步 在B用户(卖家)的终端设置 隔离级别 为最低级别 读未提交(read uncommitted) 因为只有最低级别才支持脏读，执行SQL：")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("session")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("transaction")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("isolation")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("level")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("Read")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("uncommitted")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#设置级别为读未提交")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#第三步 在A用户终端执行SQL：")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("start")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("transaction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#开始事务 begin or start transaction,begin是start transaction启动事务的别名，start... 是标准的SQL语法，是启动临时事务的推荐方法。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),t._v(" account "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" money"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("money"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"A"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#扣掉A100元")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),t._v(" account "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" money"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("money"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"B"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#给B加100元\t")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#第四步 在B用户的终端同样开始事务（start transaction），然后查询两个用户的数据如下：")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("----+------+---------+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" money   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("----+------+---------+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" A    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("900.00")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" B    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1100.00")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("----+------+---------+")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#可以发现，A用户的事务还未 commit 事务，B用户已经读取到了A用户uncommitted事务的数据，此读取到的数据，称为脏读（假象，不真实，的一个数据）")]),t._v("\n\n\n")])])])]),t._v(" "),a("li",[a("p",[t._v("不可重复读：A事务在本次事务中，对自己未操作过的数据进行了多次读取，结果出现了不一致，或者不存在的情况。（破坏了一致性，update和delete）")])]),t._v(" "),a("li",[a("p",[t._v("幻读：A事务在本次事务中，对自己未操作过得数据进行了多次读取，第一次读取时，第二次读取时记录出现了。（破坏了一致性，insert）")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);